import{a as fe,i as _e,s as me,Q as ae,q as m,l as D,v as M,w as Y,o as S,p as q,c as B,x as C,k as ie,$ as oe,m as N,F as le,t as b,b as w,d as j,A as Me,f as y,r as X,aq as We,y as G,z as J,a4 as Ke,I as Z,E as de,J as Qe,K as Xe,ax as Ye,N as Ze,P as $e,aw as xe,ap as De,ar as et,M as ye,n as ge,a6 as ue,a7 as ce,G as tt,H as he,W as ze,ay as lt,e as it,u as nt,h as rt,j as st}from"../lite.js";import{B as at}from"./BlockLabel-B0HN-MOU.js";import{I as ot,M as ut,a as ct}from"./Minimize-SPtAc8b5.js";import{W as ft,a as _t,S as mt}from"./SelectSource-CfNi7fcQ.js";import{I as dt}from"./IconButtonWrapper-Ck50MZwX.js";import{g as gt}from"./utils-Gtzs_Zla.js";import{D as Ae}from"./DropdownArrow-B85Vabzi.js";import{S as ht}from"./Square-7hK0fZD1.js";import{f as bt}from"./index-BW-aT-V7.js";import{S as wt}from"./StreamingBar-C8nPcBp-.js";import{U as pt}from"./Upload-BskNBEHw.js";import{I as vt}from"./Image-CU9FxpGN.js";function kt(i){let e,t,l;return{c(){e=ae("svg"),t=ae("path"),l=ae("circle"),m(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),m(l,"cx","12"),m(l,"cy","13"),m(l,"r","4"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","1.5"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-camera")},m(n,s){D(n,e,s),M(e,t),M(e,l)},p:Y,i:Y,o:Y,d(n){n&&S(e)}}}class It extends fe{constructor(e){super(),_e(this,e,null,kt,me,{})}}function yt(i){let e,t;return{c(){e=ae("svg"),t=ae("circle"),m(t,"cx","12"),m(t,"cy","12"),m(t,"r","10"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-circle")},m(l,n){D(l,e,n),M(e,t)},p:Y,i:Y,o:Y,d(l){l&&S(e)}}}class Mt extends fe{constructor(e){super(),_e(this,e,null,yt,me,{})}}function zt(i){let e,t,l,n,s,r="Click to Access Webcam",o,a,c,_;return n=new ft({}),{c(){e=q("button"),t=q("div"),l=q("span"),B(n.$$.fragment),s=C(),o=ie(r),m(l,"class","icon-wrap svelte-qbrfs"),m(t,"class","wrap svelte-qbrfs"),m(e,"class","svelte-qbrfs"),oe(e,"height","100%")},m(f,I){D(f,e,I),M(e,t),M(t,l),N(n,l,null),M(t,s),M(t,o),a=!0,c||(_=le(e,"click",i[1]),c=!0)},p:Y,i(f){a||(b(n.$$.fragment,f),a=!0)},o(f){w(n.$$.fragment,f),a=!1},d(f){f&&S(e),j(n),c=!1,_()}}}function Et(i){const e=Me();return[e,()=>e("click")]}class Wt extends fe{constructor(e){super(),_e(this,e,Et,zt,me,{})}}function Dt(){return navigator.mediaDevices.enumerateDevices()}function St(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Se(i,e,t,l){const n={video:l?{deviceId:{exact:l},...t?.video}:t?.video||{width:{ideal:1920},height:{ideal:1440}},audio:i&&(t?.audio??!0)};return navigator.mediaDevices.getUserMedia(n).then(s=>(St(s,e),s))}function qt(i){return i.filter(t=>t.kind==="videoinput")}function qe(i,e,t){const l=i.slice();return l[38]=e[t],l}function Bt(i){let e,t,l,n,s,r,o,a,c,_,f;const I=[Rt,jt],W=[];function L(v,E){return v[2]==="video"||v[1]?0:1}l=L(i),n=W[l]=I[l](i);let g=!i[11]&&Be(i),p=i[13]&&i[8]&&Ne(i);return{c(){e=q("div"),t=q("button"),n.c(),r=C(),g&&g.c(),o=C(),p&&p.c(),a=de(),m(t,"aria-label",s=i[2]==="image"?"capture photo":"start recording"),m(t,"class","svelte-s8feoe"),m(e,"class","button-wrap svelte-s8feoe")},m(v,E){D(v,e,E),M(e,t),W[l].m(t,null),M(e,r),g&&g.m(e,null),D(v,o,E),p&&p.m(v,E),D(v,a,E),c=!0,_||(f=le(t,"click",i[16]),_=!0)},p(v,E){let F=l;l=L(v),l===F?W[l].p(v,E):(G(),w(W[F],1,1,()=>{W[F]=null}),J(),n=W[l],n?n.p(v,E):(n=W[l]=I[l](v),n.c()),b(n,1),n.m(t,null)),(!c||E[0]&4&&s!==(s=v[2]==="image"?"capture photo":"start recording"))&&m(t,"aria-label",s),v[11]?g&&(G(),w(g,1,1,()=>{g=null}),J()):g?(g.p(v,E),E[0]&2048&&b(g,1)):(g=Be(v),g.c(),b(g,1),g.m(e,null)),v[13]&&v[8]?p?(p.p(v,E),E[0]&8448&&b(p,1)):(p=Ne(v),p.c(),b(p,1),p.m(a.parentNode,a)):p&&(G(),w(p,1,1,()=>{p=null}),J())},i(v){c||(b(n),b(g),b(p),c=!0)},o(v){w(n),w(g),w(p),c=!1},d(v){v&&(S(e),S(o),S(a)),W[l].d(),g&&g.d(),p&&p.d(v),_=!1,f()}}}function Nt(i){let e,t,l,n;return t=new Wt({}),t.$on("click",i[27]),{c(){e=q("div"),B(t.$$.fragment),m(e,"title","grant webcam access"),oe(e,"height","100%")},m(s,r){D(s,e,r),N(t,e,null),n=!0},p:Y,i(s){n||(b(t.$$.fragment,s),s&&(l||Qe(()=>{l=Xe(e,bt,{delay:100,duration:200}),l.start()})),n=!0)},o(s){w(t.$$.fragment,s),n=!1},d(s){s&&S(e),j(t)}}}function jt(i){let e,t,l;return t=new It({}),{c(){e=q("div"),B(t.$$.fragment),m(e,"class","icon svelte-s8feoe"),m(e,"title","capture photo")},m(n,s){D(n,e,s),N(t,e,null),l=!0},p:Y,i(n){l||(b(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&S(e),j(t)}}}function Rt(i){let e,t,l,n;const s=[Ct,Ut,Tt],r=[];function o(a,c){return a[1]&&a[10]==="waiting"?0:a[1]&&a[10]==="open"||!a[1]&&a[11]?1:2}return e=o(i),t=r[e]=s[e](i),{c(){t.c(),l=de()},m(a,c){r[e].m(a,c),D(a,l,c),n=!0},p(a,c){let _=e;e=o(a),e===_?r[e].p(a,c):(G(),w(r[_],1,1,()=>{r[_]=null}),J(),t=r[e],t?t.p(a,c):(t=r[e]=s[e](a),t.c()),b(t,1),t.m(l.parentNode,l))},i(a){n||(b(t),n=!0)},o(a){w(t),n=!1},d(a){a&&S(l),r[e].d(a)}}}function Tt(i){let e,t,l,n,s=i[4]("audio.record")+"",r,o;return l=new Mt({}),{c(){e=q("div"),t=q("div"),B(l.$$.fragment),n=C(),r=ie(s),m(t,"class","icon color-primary svelte-s8feoe"),m(t,"title","start recording"),m(e,"class","icon-with-text svelte-s8feoe")},m(a,c){D(a,e,c),M(e,t),N(l,t,null),M(e,n),M(e,r),o=!0},p(a,c){(!o||c[0]&16)&&s!==(s=a[4]("audio.record")+"")&&ge(r,s)},i(a){o||(b(l.$$.fragment,a),o=!0)},o(a){w(l.$$.fragment,a),o=!1},d(a){a&&S(e),j(l)}}}function Ut(i){let e,t,l,n,s=i[4]("audio.stop")+"",r,o;return l=new ht({}),{c(){e=q("div"),t=q("div"),B(l.$$.fragment),n=C(),r=ie(s),m(t,"class","icon color-primary svelte-s8feoe"),m(t,"title","stop recording"),m(e,"class","icon-with-text svelte-s8feoe")},m(a,c){D(a,e,c),M(e,t),N(l,t,null),M(e,n),M(e,r),o=!0},p(a,c){(!o||c[0]&16)&&s!==(s=a[4]("audio.stop")+"")&&ge(r,s)},i(a){o||(b(l.$$.fragment,a),o=!0)},o(a){w(l.$$.fragment,a),o=!1},d(a){a&&S(e),j(l)}}}function Ct(i){let e,t,l,n,s=i[4]("audio.waiting")+"",r,o;return l=new _t({}),{c(){e=q("div"),t=q("div"),B(l.$$.fragment),n=C(),r=ie(s),m(t,"class","icon color-primary svelte-s8feoe"),m(t,"title","spinner"),m(e,"class","icon-with-text svelte-s8feoe"),oe(e,"width","var(--size-24)")},m(a,c){D(a,e,c),M(e,t),N(l,t,null),M(e,n),M(e,r),o=!0},p(a,c){(!o||c[0]&16)&&s!==(s=a[4]("audio.waiting")+"")&&ge(r,s)},i(a){o||(b(l.$$.fragment,a),o=!0)},o(a){w(l.$$.fragment,a),o=!1},d(a){a&&S(e),j(l)}}}function Be(i){let e,t,l,n,s;return t=new Ae({}),{c(){e=q("button"),B(t.$$.fragment),m(e,"class","icon svelte-s8feoe"),m(e,"aria-label","select input source")},m(r,o){D(r,e,o),N(t,e,null),l=!0,n||(s=le(e,"click",i[28]),n=!0)},p:Y,i(r){l||(b(t.$$.fragment,r),l=!0)},o(r){w(t.$$.fragment,r),l=!1},d(r){r&&S(e),j(t),n=!1,s()}}}function Ne(i){let e,t,l,n,s,r,o;l=new Ae({});function a(f,I){return f[7].length===0?At:Lt}let c=a(i),_=c(i);return{c(){e=q("select"),t=q("button"),B(l.$$.fragment),n=C(),_.c(),m(t,"class","inset-icon svelte-s8feoe"),m(e,"class","select-wrap svelte-s8feoe"),m(e,"aria-label","select source")},m(f,I){D(f,e,I),M(e,t),N(l,t,null),M(t,n),_.m(e,null),s=!0,r||(o=[le(t,"click",Ye(i[29])),Ze(Ee.call(null,e,i[17])),le(e,"change",i[14])],r=!0)},p(f,I){c===(c=a(f))&&_?_.p(f,I):(_.d(1),_=c(f),_&&(_.c(),_.m(e,null)))},i(f){s||(b(l.$$.fragment,f),s=!0)},o(f){w(l.$$.fragment,f),s=!1},d(f){f&&S(e),j(l),_.d(),r=!1,$e(o)}}}function Lt(i){let e,t=De(i[7]),l=[];for(let n=0;n<t.length;n+=1)l[n]=je(qe(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=de()},m(n,s){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,s);D(n,e,s)},p(n,s){if(s[0]&384){t=De(n[7]);let r;for(r=0;r<t.length;r+=1){const o=qe(n,t,r);l[r]?l[r].p(o,s):(l[r]=je(o),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&S(e),et(l,n)}}}function At(i){let e,t=i[4]("common.no_devices")+"",l;return{c(){e=q("option"),l=ie(t),e.__value="",ye(e,e.__value),m(e,"class","svelte-s8feoe")},m(n,s){D(n,e,s),M(e,l)},p(n,s){s[0]&16&&t!==(t=n[4]("common.no_devices")+"")&&ge(l,t)},d(n){n&&S(e)}}}function je(i){let e,t=i[38].label+"",l,n,s,r;return{c(){e=q("option"),l=ie(t),n=C(),e.__value=s=i[38].deviceId,ye(e,e.__value),e.selected=r=i[8].deviceId===i[38].deviceId,m(e,"class","svelte-s8feoe")},m(o,a){D(o,e,a),M(e,l),M(e,n)},p(o,a){a[0]&128&&t!==(t=o[38].label+"")&&ge(l,t),a[0]&128&&s!==(s=o[38].deviceId)&&(e.__value=s,ye(e,e.__value)),a[0]&384&&r!==(r=o[8].deviceId===o[38].deviceId)&&(e.selected=r)},d(o){o&&S(e)}}}function Ft(i){let e,t,l,n,s,r,o,a,c,_,f;t=new wt({props:{time_limit:i[9]}});const I=[Nt,Bt],W=[];function L(g,p){return g[12]?1:0}return c=L(i),_=W[c]=I[c](i),{c(){e=q("div"),B(t.$$.fragment),l=C(),n=q("video"),s=C(),r=q("img"),a=C(),_.c(),m(n,"class","svelte-s8feoe"),X(n,"flip",i[3]),X(n,"hide",!i[12]||i[12]&&!!i[0]),We(r.src,o=i[0]?.url)||m(r,"src",o),m(r,"class","svelte-s8feoe"),X(r,"hide",!i[12]||i[12]&&!i[0]),m(e,"class","wrap svelte-s8feoe")},m(g,p){D(g,e,p),N(t,e,null),M(e,l),M(e,n),i[26](n),M(e,s),M(e,r),M(e,a),W[c].m(e,null),f=!0},p(g,p){const v={};p[0]&512&&(v.time_limit=g[9]),t.$set(v),(!f||p[0]&8)&&X(n,"flip",g[3]),(!f||p[0]&4097)&&X(n,"hide",!g[12]||g[12]&&!!g[0]),(!f||p[0]&1&&!We(r.src,o=g[0]?.url))&&m(r,"src",o),(!f||p[0]&4097)&&X(r,"hide",!g[12]||g[12]&&!g[0]);let E=c;c=L(g),c===E?W[c].p(g,p):(G(),w(W[E],1,1,()=>{W[E]=null}),J(),_=W[c],_?_.p(g,p):(_=W[c]=I[c](g),_.c()),b(_,1),_.m(e,null))},i(g){f||(b(t.$$.fragment,g),b(_),f=!0)},o(g){w(t.$$.fragment,g),w(_),f=!1},d(g){g&&S(e),j(t),i[26](null),W[c].d()}}}function Ee(i,e){const t=l=>{i&&!i.contains(l.target)&&!l.defaultPrevented&&e(l)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Ht(i,e,t){let l,n=[],s=null,r=null,o="closed";const a=h=>{h==="closed"?(t(9,r=null),t(10,o="closed"),t(0,V=null)):h==="waiting"?t(10,o="waiting"):t(10,o="open")},c=h=>{A&&t(9,r=h)};let _,{streaming:f=!1}=e,{pending:I=!1}=e,{root:W=""}=e,{stream_every:L=1}=e,{mode:g="image"}=e,{mirror_webcam:p}=e,{include_audio:v}=e,{webcam_constraints:E=null}=e,{i18n:F}=e,{upload:R}=e,{value:V=null}=e;const z=Me();Ke(()=>{_=document.createElement("canvas"),f&&g==="image"&&window.setInterval(()=>{l&&!I&&H()},L*1e3)});const d=async h=>{const Q=h.target.value;await Se(v,l,E,Q).then(async re=>{O=re,t(8,s=n.find(se=>se.deviceId===Q)||null),t(13,x=!1)})};async function k(){try{Se(v,l,E).then(async h=>{t(12,ne=!0),t(7,n=await Dt()),O=h}).then(()=>qt(n)).then(h=>{t(7,n=h);const U=O.getTracks().map(Q=>Q.getSettings()?.deviceId)[0];t(8,s=U&&h.find(Q=>Q.deviceId===U)||n[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&z("error",F("image.no_webcam_support"))}catch(h){if(h instanceof DOMException&&h.name=="NotAllowedError")z("error",F("image.allow_webcam_access"));else throw h}}function H(){var h=_.getContext("2d");if((!f||f&&A)&&l.videoWidth&&l.videoHeight){if(_.width=l.videoWidth,_.height=l.videoHeight,h.drawImage(l,0,0,l.videoWidth,l.videoHeight),p&&(h.scale(-1,1),h.drawImage(l,-l.videoWidth,0)),f&&(!A||o==="waiting"))return;if(f){const U=_.toDataURL("image/jpeg");z("stream",U);return}_.toBlob(U=>{z(f?"stream":"capture",U)},`image/${f?"jpeg":"png"}`,.8)}}let A=!1,T=[],O,K,P;function $(){if(A){P.stop();let h=new Blob(T,{type:K}),U=new FileReader;U.onload=async function(Q){if(Q.target){let re=new File([h],"sample."+K.substring(6));const se=await xe([re]);let Ie=(await R(se,W))?.filter(Boolean)[0];z("capture",Ie),z("stop_recording")}},U.readAsDataURL(h)}else{z("start_recording"),T=[];let h=["video/webm","video/mp4"];for(let U of h)if(MediaRecorder.isTypeSupported(U)){K=U;break}if(K===null){console.error("No supported MediaRecorder mimeType");return}P=new MediaRecorder(O,{mimeType:K}),P.addEventListener("dataavailable",function(U){T.push(U.data)}),P.start(200)}t(11,A=!A)}let ne=!1;function be(){g==="image"&&f&&t(11,A=!A),g==="image"?H():$(),!A&&O&&(z("close_stream"),O.getTracks().forEach(h=>h.stop()),t(6,l.srcObject=null,l),t(12,ne=!1),window.setTimeout(()=>{t(0,V=null)},500),t(0,V=null))}let x=!1;function ee(h){h.preventDefault(),h.stopPropagation(),t(13,x=!1)}function we(h){Z[h?"unshift":"push"](()=>{l=h,t(6,l)})}const pe=async()=>k(),ve=()=>t(13,x=!0),ke=()=>t(13,x=!1);return i.$$set=h=>{"streaming"in h&&t(1,f=h.streaming),"pending"in h&&t(20,I=h.pending),"root"in h&&t(21,W=h.root),"stream_every"in h&&t(22,L=h.stream_every),"mode"in h&&t(2,g=h.mode),"mirror_webcam"in h&&t(3,p=h.mirror_webcam),"include_audio"in h&&t(23,v=h.include_audio),"webcam_constraints"in h&&t(24,E=h.webcam_constraints),"i18n"in h&&t(4,F=h.i18n),"upload"in h&&t(25,R=h.upload),"value"in h&&t(0,V=h.value)},[V,f,g,p,F,Ee,l,n,s,r,o,A,ne,x,d,k,be,ee,a,c,I,W,L,v,E,R,we,pe,ve,ke]}class Pt extends fe{constructor(e){super(),_e(this,e,Ht,Ft,me,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,webcam_constraints:24,i18n:4,upload:25,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),y()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),y()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),y()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),y()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),y()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),y()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),y()}get webcam_constraints(){return this.$$.ctx[24]}set webcam_constraints(e){this.$$set({webcam_constraints:e}),y()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),y()}get upload(){return this.$$.ctx[25]}set upload(e){this.$$set({upload:e}),y()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),y()}get click_outside(){return Ee}}const Vt=Pt;function Re(i){let e,t,l,n,s=!i[22]&&i[18]&&Te(i),r=i[22]&&i[18]&&Ue(i);return l=new ze({props:{Icon:lt,label:"Remove Image"}}),l.$on("click",i[33]),{c(){s&&s.c(),e=C(),r&&r.c(),t=C(),B(l.$$.fragment)},m(o,a){s&&s.m(o,a),D(o,e,a),r&&r.m(o,a),D(o,t,a),N(l,o,a),n=!0},p(o,a){!o[22]&&o[18]?s?(s.p(o,a),a[0]&4456448&&b(s,1)):(s=Te(o),s.c(),b(s,1),s.m(e.parentNode,e)):s&&(G(),w(s,1,1,()=>{s=null}),J()),o[22]&&o[18]?r?(r.p(o,a),a[0]&4456448&&b(r,1)):(r=Ue(o),r.c(),b(r,1),r.m(t.parentNode,t)):r&&(G(),w(r,1,1,()=>{r=null}),J())},i(o){n||(b(s),b(r),b(l.$$.fragment,o),n=!0)},o(o){w(s),w(r),w(l.$$.fragment,o),n=!1},d(o){o&&(S(e),S(t)),s&&s.d(o),r&&r.d(o),j(l,o)}}}function Te(i){let e,t;return e=new ze({props:{Icon:ut,label:i[22]?"Exit full screen":"View in full screen"}}),e.$on("click",i[30]),{c(){B(e.$$.fragment)},m(l,n){N(e,l,n),t=!0},p(l,n){const s={};n[0]&4194304&&(s.label=l[22]?"Exit full screen":"View in full screen"),e.$set(s)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ue(i){let e,t;return e=new ze({props:{Icon:ct,label:i[22]?"Exit full screen":"View in full screen"}}),e.$on("click",i[30]),{c(){B(e.$$.fragment)},m(l,n){N(e,l,n),t=!0},p(l,n){const s={};n[0]&4194304&&(s.label=l[22]?"Exit full screen":"View in full screen"),e.$set(s)},i(l){t||(b(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ot(i){let e,t,l=i[3]?.url&&!i[20]&&Re(i);return{c(){l&&l.c(),e=de()},m(n,s){l&&l.m(n,s),D(n,e,s),t=!0},p(n,s){n[3]?.url&&!n[20]?l?(l.p(n,s),s[0]&1048584&&b(l,1)):(l=Re(n),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(G(),w(l,1,1,()=>{l=null}),J())},i(n){t||(b(l),t=!0)},o(n){w(l),t=!1},d(n){n&&S(e),l&&l.d(n)}}}function Ce(i){let e;const t=i[32].default,l=it(t,i,i[48],null);return{c(){l&&l.c()},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s[1]&131072)&&nt(l,t,n,n[48],e?st(t,n[48],s,null):rt(n[48]),null)},i(n){e||(b(l,n),e=!0)},o(n){w(l,n),e=!1},d(n){l&&l.d(n)}}}function Gt(i){let e,t,l=i[3]===null&&Ce(i);return{c(){l&&l.c(),e=de()},m(n,s){l&&l.m(n,s),D(n,e,s),t=!0},p(n,s){n[3]===null?l?(l.p(n,s),s[0]&8&&b(l,1)):(l=Ce(n),l.c(),b(l,1),l.m(e.parentNode,e)):l&&(G(),w(l,1,1,()=>{l=null}),J())},i(n){t||(b(l),t=!0)},o(n){w(l),t=!1},d(n){n&&S(e),l&&l.d(n)}}}function Jt(i){let e,t,l,n,s;return t=new vt({props:{src:i[3].url,alt:i[3].alt_text}}),{c(){e=q("div"),B(t.$$.fragment),m(e,"class","image-frame svelte-1ti4ehe"),X(e,"selectable",i[11])},m(r,o){D(r,e,o),N(t,e,null),l=!0,n||(s=le(e,"click",i[28]),n=!0)},p(r,o){const a={};o[0]&8&&(a.src=r[3].url),o[0]&8&&(a.alt=r[3].alt_text),t.$set(a),(!l||o[0]&2048)&&X(e,"selectable",r[11])},i(r){l||(b(t.$$.fragment,r),l=!0)},o(r){w(t.$$.fragment,r),l=!1},d(r){r&&S(e),j(t),n=!1,s()}}}function Kt(i){let e,t,l,n;function s(a){i[38](a)}function r(a){i[39](a)}let o={root:i[12],value:i[3],mirror_webcam:i[10],stream_every:i[17],streaming:i[9],mode:"image",include_audio:!1,i18n:i[13],upload:i[15],webcam_constraints:i[19]};return i[4]!==void 0&&(o.modify_stream=i[4]),i[5]!==void 0&&(o.set_time_limit=i[5]),e=new Vt({props:o}),Z.push(()=>ue(e,"modify_stream",s)),Z.push(()=>ue(e,"set_time_limit",r)),e.$on("capture",i[40]),e.$on("stream",i[41]),e.$on("error",i[42]),e.$on("drag",i[43]),e.$on("upload",i[44]),e.$on("close_stream",i[45]),{c(){B(e.$$.fragment)},m(a,c){N(e,a,c),n=!0},p(a,c){const _={};c[0]&4096&&(_.root=a[12]),c[0]&8&&(_.value=a[3]),c[0]&1024&&(_.mirror_webcam=a[10]),c[0]&131072&&(_.stream_every=a[17]),c[0]&512&&(_.streaming=a[9]),c[0]&8192&&(_.i18n=a[13]),c[0]&32768&&(_.upload=a[15]),c[0]&524288&&(_.webcam_constraints=a[19]),!t&&c[0]&16&&(t=!0,_.modify_stream=a[4],ce(()=>t=!1)),!l&&c[0]&32&&(l=!0,_.set_time_limit=a[5],ce(()=>l=!1)),e.$set(_)},i(a){n||(b(e.$$.fragment,a),n=!0)},o(a){w(e.$$.fragment,a),n=!1},d(a){j(e,a)}}}function Le(i){let e,t,l;function n(r){i[46](r)}let s={sources:i[8],handle_clear:i[25],handle_select:i[29]};return i[1]!==void 0&&(s.active_source=i[1]),e=new mt({props:s}),Z.push(()=>ue(e,"active_source",n)),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),l=!0},p(r,o){const a={};o[0]&256&&(a.sources=r[8]),!t&&o[0]&2&&(t=!0,a.active_source=r[1],ce(()=>t=!1)),e.$set(a)},i(r){l||(b(e.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),l=!1},d(r){j(e,r)}}}function Qt(i){let e,t,l,n,s,r,o,a,c,_,f,I,W,L=i[8].length>1||i[8].includes("clipboard"),g;e=new at({props:{show_label:i[7],Icon:ot,label:i[6]||"Image"}}),n=new dt({props:{$$slots:{default:[Ot]},$$scope:{ctx:i}}});function p(d){i[35](d)}function v(d){i[36](d)}let E={hidden:i[3]!==null||i[1]==="webcam",filetype:i[1]==="clipboard"?"clipboard":"image/*",root:i[12],max_file_size:i[14],disable_click:!i[8].includes("upload")||i[3]!==null,upload:i[15],stream_handler:i[16],$$slots:{default:[Gt]},$$scope:{ctx:i}};i[0]!==void 0&&(E.uploading=i[0]),i[2]!==void 0&&(E.dragging=i[2]),o=new pt({props:E}),i[34](o),Z.push(()=>ue(o,"uploading",p)),Z.push(()=>ue(o,"dragging",v)),o.$on("load",i[24]),o.$on("error",i[37]);const F=[Kt,Jt],R=[];function V(d,k){return d[1]==="webcam"&&(d[9]||!d[9]&&!d[3])?0:d[3]!==null&&!d[9]?1:-1}~(f=V(i))&&(I=R[f]=F[f](i));let z=L&&Le(i);return{c(){B(e.$$.fragment),t=C(),l=q("div"),B(n.$$.fragment),s=C(),r=q("div"),B(o.$$.fragment),_=C(),I&&I.c(),W=C(),z&&z.c(),m(r,"class","upload-container svelte-1ti4ehe"),X(r,"reduced-height",i[8].length>1),oe(r,"width",i[3]?"auto":"100%"),m(l,"data-testid","image"),m(l,"class","image-container svelte-1ti4ehe")},m(d,k){N(e,d,k),D(d,t,k),D(d,l,k),N(n,l,null),M(l,s),M(l,r),N(o,r,null),M(r,_),~f&&R[f].m(r,null),M(l,W),z&&z.m(l,null),i[47](l),g=!0},p(d,k){const H={};k[0]&128&&(H.show_label=d[7]),k[0]&64&&(H.label=d[6]||"Image"),e.$set(H);const A={};k[0]&5505032|k[1]&131072&&(A.$$scope={dirty:k,ctx:d}),n.$set(A);const T={};k[0]&10&&(T.hidden=d[3]!==null||d[1]==="webcam"),k[0]&2&&(T.filetype=d[1]==="clipboard"?"clipboard":"image/*"),k[0]&4096&&(T.root=d[12]),k[0]&16384&&(T.max_file_size=d[14]),k[0]&264&&(T.disable_click=!d[8].includes("upload")||d[3]!==null),k[0]&32768&&(T.upload=d[15]),k[0]&65536&&(T.stream_handler=d[16]),k[0]&8|k[1]&131072&&(T.$$scope={dirty:k,ctx:d}),!a&&k[0]&1&&(a=!0,T.uploading=d[0],ce(()=>a=!1)),!c&&k[0]&4&&(c=!0,T.dragging=d[2],ce(()=>c=!1)),o.$set(T);let O=f;f=V(d),f===O?~f&&R[f].p(d,k):(I&&(G(),w(R[O],1,1,()=>{R[O]=null}),J()),~f?(I=R[f],I?I.p(d,k):(I=R[f]=F[f](d),I.c()),b(I,1),I.m(r,null)):I=null),(!g||k[0]&256)&&X(r,"reduced-height",d[8].length>1),k[0]&8&&oe(r,"width",d[3]?"auto":"100%"),k[0]&256&&(L=d[8].length>1||d[8].includes("clipboard")),L?z?(z.p(d,k),k[0]&256&&b(z,1)):(z=Le(d),z.c(),b(z,1),z.m(l,null)):z&&(G(),w(z,1,1,()=>{z=null}),J())},i(d){g||(b(e.$$.fragment,d),b(n.$$.fragment,d),b(o.$$.fragment,d),b(I),b(z),g=!0)},o(d){w(e.$$.fragment,d),w(n.$$.fragment,d),w(o.$$.fragment,d),w(I),w(z),g=!1},d(d){d&&(S(t),S(l)),j(e,d),j(n),i[34](null),j(o),~f&&R[f].d(),z&&z.d(),i[47](null)}}}function Xt(i,e,t){let l,{$$slots:n={},$$scope:s}=e,{value:r=null}=e,{label:o=void 0}=e,{show_label:a}=e,{sources:c=["upload","clipboard","webcam"]}=e,{streaming:_=!1}=e,{pending:f=!1}=e,{mirror_webcam:I}=e,{selectable:W=!1}=e,{root:L}=e,{i18n:g}=e,{max_file_size:p=null}=e,{upload:v}=e,{stream_handler:E}=e,{stream_every:F}=e,{modify_stream:R}=e,{set_time_limit:V}=e,{show_fullscreen_button:z=!0}=e,d,{uploading:k=!1}=e,{active_source:H=null}=e,{webcam_constraints:A=void 0}=e;function T({detail:u}){_||(t(3,r=u),P("upload"))}function O(){t(3,r=null),P("clear"),P("change",null)}async function K(u,te){if(te==="stream"){P("stream",{value:{url:u},is_value_data:!0});return}t(31,f=!0);const Je=await d.load_files([new File([u],`image/${_?"jpeg":"png"}`)]);(te==="change"||te==="upload")&&(t(3,r=Je?.[0]||null),await tt(),P("change")),t(31,f=!1)}const P=Me();let{dragging:$=!1}=e;function ne(u){let te=gt(u);te&&P("select",{index:te,value:null})}async function be(u){switch(u){case"clipboard":d.paste_clipboard();break}}let x=!1,ee;const we=async()=>{await ee.requestFullscreen()},pe=u=>{t(3,r=null),P("clear"),u.stopPropagation()};function ve(u){Z[u?"unshift":"push"](()=>{d=u,t(21,d)})}function ke(u){k=u,t(0,k)}function h(u){$=u,t(2,$)}function U(u){he.call(this,i,u)}function Q(u){R=u,t(4,R)}function re(u){V=u,t(5,V)}const se=u=>K(u.detail,"change"),Ie=u=>K(u.detail,"stream");function Fe(u){he.call(this,i,u)}function He(u){he.call(this,i,u)}const Pe=u=>K(u.detail,"upload");function Ve(u){he.call(this,i,u)}function Oe(u){H=u,t(1,H),t(8,c)}function Ge(u){Z[u?"unshift":"push"](()=>{ee=u,t(23,ee)})}return i.$$set=u=>{"value"in u&&t(3,r=u.value),"label"in u&&t(6,o=u.label),"show_label"in u&&t(7,a=u.show_label),"sources"in u&&t(8,c=u.sources),"streaming"in u&&t(9,_=u.streaming),"pending"in u&&t(31,f=u.pending),"mirror_webcam"in u&&t(10,I=u.mirror_webcam),"selectable"in u&&t(11,W=u.selectable),"root"in u&&t(12,L=u.root),"i18n"in u&&t(13,g=u.i18n),"max_file_size"in u&&t(14,p=u.max_file_size),"upload"in u&&t(15,v=u.upload),"stream_handler"in u&&t(16,E=u.stream_handler),"stream_every"in u&&t(17,F=u.stream_every),"modify_stream"in u&&t(4,R=u.modify_stream),"set_time_limit"in u&&t(5,V=u.set_time_limit),"show_fullscreen_button"in u&&t(18,z=u.show_fullscreen_button),"uploading"in u&&t(0,k=u.uploading),"active_source"in u&&t(1,H=u.active_source),"webcam_constraints"in u&&t(19,A=u.webcam_constraints),"dragging"in u&&t(2,$=u.dragging),"$$scope"in u&&t(48,s=u.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&258&&!H&&c&&t(1,H=c[0]),i.$$.dirty[0]&514&&t(20,l=_&&H==="webcam"),i.$$.dirty[0]&1048577&&k&&!l&&t(3,r=null),i.$$.dirty[0]&4&&P("drag",$)},[k,H,$,r,R,V,o,a,c,_,I,W,L,g,p,v,E,F,z,A,l,d,x,ee,T,O,K,P,ne,be,we,f,n,pe,ve,ke,h,U,Q,re,se,Ie,Fe,He,Pe,Ve,Oe,Ge,s]}class Yt extends fe{constructor(e){super(),_e(this,e,Xt,Qt,me,{value:3,label:6,show_label:7,sources:8,streaming:9,pending:31,mirror_webcam:10,selectable:11,root:12,i18n:13,max_file_size:14,upload:15,stream_handler:16,stream_every:17,modify_stream:4,set_time_limit:5,show_fullscreen_button:18,uploading:0,active_source:1,webcam_constraints:19,dragging:2},null,[-1,-1])}get value(){return this.$$.ctx[3]}set value(e){this.$$set({value:e}),y()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),y()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),y()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),y()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),y()}get pending(){return this.$$.ctx[31]}set pending(e){this.$$set({pending:e}),y()}get mirror_webcam(){return this.$$.ctx[10]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),y()}get selectable(){return this.$$.ctx[11]}set selectable(e){this.$$set({selectable:e}),y()}get root(){return this.$$.ctx[12]}set root(e){this.$$set({root:e}),y()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),y()}get max_file_size(){return this.$$.ctx[14]}set max_file_size(e){this.$$set({max_file_size:e}),y()}get upload(){return this.$$.ctx[15]}set upload(e){this.$$set({upload:e}),y()}get stream_handler(){return this.$$.ctx[16]}set stream_handler(e){this.$$set({stream_handler:e}),y()}get stream_every(){return this.$$.ctx[17]}set stream_every(e){this.$$set({stream_every:e}),y()}get modify_stream(){return this.$$.ctx[4]}set modify_stream(e){this.$$set({modify_stream:e}),y()}get set_time_limit(){return this.$$.ctx[5]}set set_time_limit(e){this.$$set({set_time_limit:e}),y()}get show_fullscreen_button(){return this.$$.ctx[18]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),y()}get uploading(){return this.$$.ctx[0]}set uploading(e){this.$$set({uploading:e}),y()}get active_source(){return this.$$.ctx[1]}set active_source(e){this.$$set({active_source:e}),y()}get webcam_constraints(){return this.$$.ctx[19]}set webcam_constraints(e){this.$$set({webcam_constraints:e}),y()}get dragging(){return this.$$.ctx[2]}set dragging(e){this.$$set({dragging:e}),y()}}const ul=Yt;export{ul as I,Vt as W};
//# sourceMappingURL=ImageUploader-C742EQo1.js.map
