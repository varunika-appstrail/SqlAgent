import"./IconButtonWrapper.svelte_svelte_type_style_lang-DAP8_Zsr.js";import"./MarkdownCode.svelte_svelte_type_style_lang-A3JQJUff.js";import{B as gt}from"./BlockLabel-CnzaitFN.js";import{I as Ve}from"./IconButton-DtUbToT-.js";import{C as ht}from"./Clear-By3xiIwg.js";import{I as bt,M as pt,a as wt}from"./Minimize-Biy58KWs.js";import{W as vt,a as kt,S as yt}from"./SelectSource-CT71dqzj.js";import{I as It}from"./IconButtonWrapper-fdTarNL8.js";import{g as $t}from"./utils-Gtzs_Zla.js";import{D as rt}from"./DropdownArrow-B7m41FWT.js";import{S as St}from"./Square-oAGqOwsh.js";import"./StreamingBar.svelte_svelte_type_style_lang-CxOfZBE-.js";import{f as qt}from"./index-D0qP1jjX.js";import{S as Ct}from"./StreamingBar-CCUnT5tf.js";import{d as Dt}from"./index-9GPo9fAK.js";import{U as Et}from"./Upload-FQqpHWU_.js";/* empty css                                                   */import{I as Mt}from"./Image-BRVH1yXn.js";const{SvelteComponent:zt,append:Oe,attr:A,detach:Wt,init:Bt,insert:Nt,noop:Be,safe_not_equal:jt,svg_element:Ne}=window.__gradio__svelte__internal;function Rt(i){let e,t,n;return{c(){e=Ne("svg"),t=Ne("path"),n=Ne("circle"),A(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),A(n,"cx","12"),A(n,"cy","13"),A(n,"r","4"),A(e,"xmlns","http://www.w3.org/2000/svg"),A(e,"width","100%"),A(e,"height","100%"),A(e,"viewBox","0 0 24 24"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"stroke-width","1.5"),A(e,"stroke-linecap","round"),A(e,"stroke-linejoin","round"),A(e,"class","feather feather-camera")},m(l,s){Nt(l,e,s),Oe(e,t),Oe(e,n)},p:Be,i:Be,o:Be,d(l){l&&Wt(e)}}}class Tt extends zt{constructor(e){super(),Bt(this,e,null,Rt,jt,{})}}const{SvelteComponent:Ut,append:Lt,attr:O,detach:Vt,init:At,insert:Ft,noop:je,safe_not_equal:Ht,svg_element:Pe}=window.__gradio__svelte__internal;function Ot(i){let e,t;return{c(){e=Pe("svg"),t=Pe("circle"),O(t,"cx","12"),O(t,"cy","12"),O(t,"r","10"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"width","100%"),O(e,"height","100%"),O(e,"viewBox","0 0 24 24"),O(e,"stroke-width","1.5"),O(e,"stroke-linecap","round"),O(e,"stroke-linejoin","round"),O(e,"class","feather feather-circle")},m(n,l){Ft(n,e,l),Lt(e,t)},p:je,i:je,o:je,d(n){n&&Vt(e)}}}class Pt extends Ut{constructor(e){super(),At(this,e,null,Ot,Ht,{})}}const{SvelteComponent:Gt,append:ke,attr:Re,create_component:Jt,destroy_component:Kt,detach:Qt,element:Te,init:Xt,insert:Yt,listen:Zt,mount_component:xt,noop:en,safe_not_equal:tn,set_style:nn,space:ln,text:rn,transition_in:sn,transition_out:on}=window.__gradio__svelte__internal,{createEventDispatcher:an}=window.__gradio__svelte__internal;function cn(i){let e,t,n,l,s,r="Click to Access Webcam",a,o,u,f;return l=new vt({}),{c(){e=Te("button"),t=Te("div"),n=Te("span"),Jt(l.$$.fragment),s=ln(),a=rn(r),Re(n,"class","icon-wrap svelte-qbrfs"),Re(t,"class","wrap svelte-qbrfs"),Re(e,"class","svelte-qbrfs"),nn(e,"height","100%")},m(_,w){Yt(_,e,w),ke(e,t),ke(t,n),xt(l,n,null),ke(t,s),ke(t,a),o=!0,u||(f=Zt(e,"click",i[1]),u=!0)},p:en,i(_){o||(sn(l.$$.fragment,_),o=!0)},o(_){on(l.$$.fragment,_),o=!1},d(_){_&&Qt(e),Kt(l),u=!1,f()}}}function un(i){const e=an();return[e,()=>e("click")]}class _n extends Gt{constructor(e){super(),Xt(this,e,un,cn,tn,{})}}function fn(){return navigator.mediaDevices.enumerateDevices()}function mn(i,e){e.srcObject=i,e.muted=!0,e.play()}async function Ge(i,e,t,n){const l={video:n?{deviceId:{exact:n},...t?.video}:t?.video||{width:{ideal:1920},height:{ideal:1440}},audio:i&&(t?.audio??!0)};return navigator.mediaDevices.getUserMedia(l).then(s=>(mn(s,e),s))}function dn(i){return i.filter(t=>t.kind==="videoinput")}const{SvelteComponent:gn,action_destroyer:hn,add_render_callback:bn,append:C,attr:y,binding_callbacks:pn,check_outros:ge,create_component:Z,create_in_transition:wn,destroy_component:x,destroy_each:vn,detach:R,element:M,empty:Ae,ensure_array_like:Je,flush:P,group_outros:he,init:kn,insert:T,listen:Se,mount_component:ee,noop:Fe,run_all:yn,safe_not_equal:In,set_data:we,set_input_value:Ue,set_style:st,space:K,src_url_equal:Ke,stop_propagation:$n,text:ve,toggle_class:ae,transition_in:D,transition_out:E}=window.__gradio__svelte__internal,{createEventDispatcher:Sn,onMount:qn}=window.__gradio__svelte__internal;function Qe(i,e,t){const n=i.slice();return n[38]=e[t],n}function Cn(i){let e,t,n,l,s,r,a,o,u,f,_;const w=[Mn,En],I=[];function N(b,k){return b[2]==="video"||b[1]?0:1}n=N(i),l=I[n]=w[n](i);let d=!i[11]&&Xe(i),h=i[13]&&i[8]&&Ye(i);return{c(){e=M("div"),t=M("button"),l.c(),r=K(),d&&d.c(),a=K(),h&&h.c(),o=Ae(),y(t,"aria-label",s=i[2]==="image"?"capture photo":"start recording"),y(t,"class","svelte-s8feoe"),y(e,"class","button-wrap svelte-s8feoe")},m(b,k){T(b,e,k),C(e,t),I[n].m(t,null),C(e,r),d&&d.m(e,null),T(b,a,k),h&&h.m(b,k),T(b,o,k),u=!0,f||(_=Se(t,"click",i[16]),f=!0)},p(b,k){let U=n;n=N(b),n===U?I[n].p(b,k):(he(),E(I[U],1,1,()=>{I[U]=null}),ge(),l=I[n],l?l.p(b,k):(l=I[n]=w[n](b),l.c()),D(l,1),l.m(t,null)),(!u||k[0]&4&&s!==(s=b[2]==="image"?"capture photo":"start recording"))&&y(t,"aria-label",s),b[11]?d&&(he(),E(d,1,1,()=>{d=null}),ge()):d?(d.p(b,k),k[0]&2048&&D(d,1)):(d=Xe(b),d.c(),D(d,1),d.m(e,null)),b[13]&&b[8]?h?(h.p(b,k),k[0]&8448&&D(h,1)):(h=Ye(b),h.c(),D(h,1),h.m(o.parentNode,o)):h&&(he(),E(h,1,1,()=>{h=null}),ge())},i(b){u||(D(l),D(d),D(h),u=!0)},o(b){E(l),E(d),E(h),u=!1},d(b){b&&(R(e),R(a),R(o)),I[n].d(),d&&d.d(),h&&h.d(b),f=!1,_()}}}function Dn(i){let e,t,n,l;return t=new _n({}),t.$on("click",i[27]),{c(){e=M("div"),Z(t.$$.fragment),y(e,"title","grant webcam access"),st(e,"height","100%")},m(s,r){T(s,e,r),ee(t,e,null),l=!0},p:Fe,i(s){l||(D(t.$$.fragment,s),s&&(n||bn(()=>{n=wn(e,qt,{delay:100,duration:200}),n.start()})),l=!0)},o(s){E(t.$$.fragment,s),l=!1},d(s){s&&R(e),x(t)}}}function En(i){let e,t,n;return t=new Tt({}),{c(){e=M("div"),Z(t.$$.fragment),y(e,"class","icon svelte-s8feoe"),y(e,"title","capture photo")},m(l,s){T(l,e,s),ee(t,e,null),n=!0},p:Fe,i(l){n||(D(t.$$.fragment,l),n=!0)},o(l){E(t.$$.fragment,l),n=!1},d(l){l&&R(e),x(t)}}}function Mn(i){let e,t,n,l;const s=[Bn,Wn,zn],r=[];function a(o,u){return o[1]&&o[10]==="waiting"?0:o[1]&&o[10]==="open"||!o[1]&&o[11]?1:2}return e=a(i),t=r[e]=s[e](i),{c(){t.c(),n=Ae()},m(o,u){r[e].m(o,u),T(o,n,u),l=!0},p(o,u){let f=e;e=a(o),e===f?r[e].p(o,u):(he(),E(r[f],1,1,()=>{r[f]=null}),ge(),t=r[e],t?t.p(o,u):(t=r[e]=s[e](o),t.c()),D(t,1),t.m(n.parentNode,n))},i(o){l||(D(t),l=!0)},o(o){E(t),l=!1},d(o){o&&R(n),r[e].d(o)}}}function zn(i){let e,t,n,l,s=i[4]("audio.record")+"",r,a;return n=new Pt({}),{c(){e=M("div"),t=M("div"),Z(n.$$.fragment),l=K(),r=ve(s),y(t,"class","icon color-primary svelte-s8feoe"),y(t,"title","start recording"),y(e,"class","icon-with-text svelte-s8feoe")},m(o,u){T(o,e,u),C(e,t),ee(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.record")+"")&&we(r,s)},i(o){a||(D(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&R(e),x(n)}}}function Wn(i){let e,t,n,l,s=i[4]("audio.stop")+"",r,a;return n=new St({}),{c(){e=M("div"),t=M("div"),Z(n.$$.fragment),l=K(),r=ve(s),y(t,"class","icon color-primary svelte-s8feoe"),y(t,"title","stop recording"),y(e,"class","icon-with-text svelte-s8feoe")},m(o,u){T(o,e,u),C(e,t),ee(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.stop")+"")&&we(r,s)},i(o){a||(D(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&R(e),x(n)}}}function Bn(i){let e,t,n,l,s=i[4]("audio.waiting")+"",r,a;return n=new kt({}),{c(){e=M("div"),t=M("div"),Z(n.$$.fragment),l=K(),r=ve(s),y(t,"class","icon color-primary svelte-s8feoe"),y(t,"title","spinner"),y(e,"class","icon-with-text svelte-s8feoe"),st(e,"width","var(--size-24)")},m(o,u){T(o,e,u),C(e,t),ee(n,t,null),C(e,l),C(e,r),a=!0},p(o,u){(!a||u[0]&16)&&s!==(s=o[4]("audio.waiting")+"")&&we(r,s)},i(o){a||(D(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&R(e),x(n)}}}function Xe(i){let e,t,n,l,s;return t=new rt({}),{c(){e=M("button"),Z(t.$$.fragment),y(e,"class","icon svelte-s8feoe"),y(e,"aria-label","select input source")},m(r,a){T(r,e,a),ee(t,e,null),n=!0,l||(s=Se(e,"click",i[28]),l=!0)},p:Fe,i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){r&&R(e),x(t),l=!1,s()}}}function Ye(i){let e,t,n,l,s,r,a;n=new rt({});function o(_,w){return _[7].length===0?jn:Nn}let u=o(i),f=u(i);return{c(){e=M("select"),t=M("button"),Z(n.$$.fragment),l=K(),f.c(),y(t,"class","inset-icon svelte-s8feoe"),y(e,"class","select-wrap svelte-s8feoe"),y(e,"aria-label","select source")},m(_,w){T(_,e,w),C(e,t),ee(n,t,null),C(t,l),f.m(e,null),s=!0,r||(a=[Se(t,"click",$n(i[29])),hn(He.call(null,e,i[17])),Se(e,"change",i[14])],r=!0)},p(_,w){u===(u=o(_))&&f?f.p(_,w):(f.d(1),f=u(_),f&&(f.c(),f.m(e,null)))},i(_){s||(D(n.$$.fragment,_),s=!0)},o(_){E(n.$$.fragment,_),s=!1},d(_){_&&R(e),x(n),f.d(),r=!1,yn(a)}}}function Nn(i){let e,t=Je(i[7]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Ze(Qe(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=Ae()},m(l,s){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(l,s);T(l,e,s)},p(l,s){if(s[0]&384){t=Je(l[7]);let r;for(r=0;r<t.length;r+=1){const a=Qe(l,t,r);n[r]?n[r].p(a,s):(n[r]=Ze(a),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(l){l&&R(e),vn(n,l)}}}function jn(i){let e,t=i[4]("common.no_devices")+"",n;return{c(){e=M("option"),n=ve(t),e.__value="",Ue(e,e.__value),y(e,"class","svelte-s8feoe")},m(l,s){T(l,e,s),C(e,n)},p(l,s){s[0]&16&&t!==(t=l[4]("common.no_devices")+"")&&we(n,t)},d(l){l&&R(e)}}}function Ze(i){let e,t=i[38].label+"",n,l,s,r;return{c(){e=M("option"),n=ve(t),l=K(),e.__value=s=i[38].deviceId,Ue(e,e.__value),e.selected=r=i[8].deviceId===i[38].deviceId,y(e,"class","svelte-s8feoe")},m(a,o){T(a,e,o),C(e,n),C(e,l)},p(a,o){o[0]&128&&t!==(t=a[38].label+"")&&we(n,t),o[0]&128&&s!==(s=a[38].deviceId)&&(e.__value=s,Ue(e,e.__value)),o[0]&384&&r!==(r=a[8].deviceId===a[38].deviceId)&&(e.selected=r)},d(a){a&&R(e)}}}function Rn(i){let e,t,n,l,s,r,a,o,u,f,_;t=new Ct({props:{time_limit:i[9]}});const w=[Dn,Cn],I=[];function N(d,h){return d[12]?1:0}return u=N(i),f=I[u]=w[u](i),{c(){e=M("div"),Z(t.$$.fragment),n=K(),l=M("video"),s=K(),r=M("img"),o=K(),f.c(),y(l,"class","svelte-s8feoe"),ae(l,"flip",i[3]),ae(l,"hide",!i[12]||i[12]&&!!i[0]),Ke(r.src,a=i[0]?.url)||y(r,"src",a),y(r,"class","svelte-s8feoe"),ae(r,"hide",!i[12]||i[12]&&!i[0]),y(e,"class","wrap svelte-s8feoe")},m(d,h){T(d,e,h),ee(t,e,null),C(e,n),C(e,l),i[26](l),C(e,s),C(e,r),C(e,o),I[u].m(e,null),_=!0},p(d,h){const b={};h[0]&512&&(b.time_limit=d[9]),t.$set(b),(!_||h[0]&8)&&ae(l,"flip",d[3]),(!_||h[0]&4097)&&ae(l,"hide",!d[12]||d[12]&&!!d[0]),(!_||h[0]&1&&!Ke(r.src,a=d[0]?.url))&&y(r,"src",a),(!_||h[0]&4097)&&ae(r,"hide",!d[12]||d[12]&&!d[0]);let k=u;u=N(d),u===k?I[u].p(d,h):(he(),E(I[k],1,1,()=>{I[k]=null}),ge(),f=I[u],f?f.p(d,h):(f=I[u]=w[u](d),f.c()),D(f,1),f.m(e,null))},i(d){_||(D(t.$$.fragment,d),D(f),_=!0)},o(d){E(t.$$.fragment,d),E(f),_=!1},d(d){d&&R(e),x(t),i[26](null),I[u].d()}}}function He(i,e){const t=n=>{i&&!i.contains(n.target)&&!n.defaultPrevented&&e(n)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Tn(i,e,t){let n,l=[],s=null,r=null,a="closed";const o=g=>{g==="closed"?(t(9,r=null),t(10,a="closed"),t(0,F=null)):g==="waiting"?t(10,a="waiting"):t(10,a="open")},u=g=>{j&&t(9,r=g)};let f,{streaming:_=!1}=e,{pending:w=!1}=e,{root:I=""}=e,{stream_every:N=1}=e,{mode:d="image"}=e,{mirror_webcam:h}=e,{include_audio:b}=e,{webcam_constraints:k=null}=e,{i18n:U}=e,{upload:z}=e,{value:F=null}=e;const v=Sn();qn(()=>{f=document.createElement("canvas"),_&&d==="image"&&window.setInterval(()=>{n&&!w&&L()},N*1e3)});const m=async g=>{const J=g.target.value;await Ge(b,n,k,J).then(async me=>{H=me,t(8,s=l.find(de=>de.deviceId===J)||null),t(13,ne=!1)})};async function p(){try{Ge(b,n,k).then(async g=>{t(12,fe=!0),t(7,l=await fn()),H=g}).then(()=>dn(l)).then(g=>{t(7,l=g);const B=H.getTracks().map(J=>J.getSettings()?.deviceId)[0];t(8,s=B&&g.find(J=>J.deviceId===B)||l[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&v("error",U("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")v("error",U("image.allow_webcam_access"));else throw g}}function L(){var g=f.getContext("2d");if((!_||_&&j)&&n.videoWidth&&n.videoHeight){if(f.width=n.videoWidth,f.height=n.videoHeight,g.drawImage(n,0,0,n.videoWidth,n.videoHeight),h&&(g.scale(-1,1),g.drawImage(n,-n.videoWidth,0)),_&&(!j||a==="waiting"))return;if(_){const B=f.toDataURL("image/jpeg");v("stream",B);return}f.toBlob(B=>{v(_?"stream":"capture",B)},`image/${_?"jpeg":"png"}`,.8)}}let j=!1,W=[],H,G,V;function te(){if(j){V.stop();let g=new Blob(W,{type:G}),B=new FileReader;B.onload=async function(J){if(J.target){let me=new File([g],"sample."+G.substring(6));const de=await Dt([me]);let We=(await z(de,I))?.filter(Boolean)[0];v("capture",We),v("stop_recording")}},B.readAsDataURL(g)}else{v("start_recording"),W=[];let g=["video/webm","video/mp4"];for(let B of g)if(MediaRecorder.isTypeSupported(B)){G=B;break}if(G===null){console.error("No supported MediaRecorder mimeType");return}V=new MediaRecorder(H,{mimeType:G}),V.addEventListener("dataavailable",function(B){W.push(B.data)}),V.start(200)}t(11,j=!j)}let fe=!1;function Ce(){d==="image"&&_&&t(11,j=!j),d==="image"?L():te(),!j&&H&&(v("close_stream"),H.getTracks().forEach(g=>g.stop()),t(6,n.srcObject=null,n),t(12,fe=!1),window.setTimeout(()=>{t(0,F=null)},500),t(0,F=null))}let ne=!1;function se(g){g.preventDefault(),g.stopPropagation(),t(13,ne=!1)}function De(g){pn[g?"unshift":"push"](()=>{n=g,t(6,n)})}const Ee=async()=>p(),Me=()=>t(13,ne=!0),ze=()=>t(13,ne=!1);return i.$$set=g=>{"streaming"in g&&t(1,_=g.streaming),"pending"in g&&t(20,w=g.pending),"root"in g&&t(21,I=g.root),"stream_every"in g&&t(22,N=g.stream_every),"mode"in g&&t(2,d=g.mode),"mirror_webcam"in g&&t(3,h=g.mirror_webcam),"include_audio"in g&&t(23,b=g.include_audio),"webcam_constraints"in g&&t(24,k=g.webcam_constraints),"i18n"in g&&t(4,U=g.i18n),"upload"in g&&t(25,z=g.upload),"value"in g&&t(0,F=g.value)},[F,_,d,h,U,He,n,l,s,r,a,j,fe,ne,m,p,Ce,se,o,u,w,I,N,b,k,z,De,Ee,Me,ze]}class Un extends gn{constructor(e){super(),kn(this,e,Tn,Rn,In,{modify_stream:18,set_time_limit:19,streaming:1,pending:20,root:21,stream_every:22,mode:2,mirror_webcam:3,include_audio:23,webcam_constraints:24,i18n:4,upload:25,value:0,click_outside:5},null,[-1,-1])}get modify_stream(){return this.$$.ctx[18]}get set_time_limit(){return this.$$.ctx[19]}get streaming(){return this.$$.ctx[1]}set streaming(e){this.$$set({streaming:e}),P()}get pending(){return this.$$.ctx[20]}set pending(e){this.$$set({pending:e}),P()}get root(){return this.$$.ctx[21]}set root(e){this.$$set({root:e}),P()}get stream_every(){return this.$$.ctx[22]}set stream_every(e){this.$$set({stream_every:e}),P()}get mode(){return this.$$.ctx[2]}set mode(e){this.$$set({mode:e}),P()}get mirror_webcam(){return this.$$.ctx[3]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),P()}get include_audio(){return this.$$.ctx[23]}set include_audio(e){this.$$set({include_audio:e}),P()}get webcam_constraints(){return this.$$.ctx[24]}set webcam_constraints(e){this.$$set({webcam_constraints:e}),P()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),P()}get upload(){return this.$$.ctx[25]}set upload(e){this.$$set({upload:e}),P()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),P()}get click_outside(){return He}}const Ln=Un,{SvelteComponent:Vn,add_flush_callback:be,append:ye,attr:$e,bind:pe,binding_callbacks:ie,bubble:Ie,check_outros:ue,create_component:Q,create_slot:An,destroy_component:X,detach:le,element:Le,empty:ot,flush:q,get_all_dirty_from_scope:Fn,get_slot_changes:Hn,group_outros:_e,init:On,insert:re,listen:Pn,mount_component:Y,safe_not_equal:Gn,set_style:xe,space:ce,toggle_class:qe,transition_in:$,transition_out:S,update_slot_base:Jn}=window.__gradio__svelte__internal,{createEventDispatcher:Kn,tick:Qn}=window.__gradio__svelte__internal;function et(i){let e,t,n,l,s=!i[22]&&i[18]&&tt(i),r=i[22]&&i[18]&&nt(i);return n=new Ve({props:{Icon:ht,label:"Remove Image"}}),n.$on("click",i[33]),{c(){s&&s.c(),e=ce(),r&&r.c(),t=ce(),Q(n.$$.fragment)},m(a,o){s&&s.m(a,o),re(a,e,o),r&&r.m(a,o),re(a,t,o),Y(n,a,o),l=!0},p(a,o){!a[22]&&a[18]?s?(s.p(a,o),o[0]&4456448&&$(s,1)):(s=tt(a),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(_e(),S(s,1,1,()=>{s=null}),ue()),a[22]&&a[18]?r?(r.p(a,o),o[0]&4456448&&$(r,1)):(r=nt(a),r.c(),$(r,1),r.m(t.parentNode,t)):r&&(_e(),S(r,1,1,()=>{r=null}),ue())},i(a){l||($(s),$(r),$(n.$$.fragment,a),l=!0)},o(a){S(s),S(r),S(n.$$.fragment,a),l=!1},d(a){a&&(le(e),le(t)),s&&s.d(a),r&&r.d(a),X(n,a)}}}function tt(i){let e,t;return e=new Ve({props:{Icon:pt,label:i[22]?"Exit full screen":"View in full screen"}}),e.$on("click",i[30]),{c(){Q(e.$$.fragment)},m(n,l){Y(e,n,l),t=!0},p(n,l){const s={};l[0]&4194304&&(s.label=n[22]?"Exit full screen":"View in full screen"),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function nt(i){let e,t;return e=new Ve({props:{Icon:wt,label:i[22]?"Exit full screen":"View in full screen"}}),e.$on("click",i[30]),{c(){Q(e.$$.fragment)},m(n,l){Y(e,n,l),t=!0},p(n,l){const s={};l[0]&4194304&&(s.label=n[22]?"Exit full screen":"View in full screen"),e.$set(s)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Xn(i){let e,t,n=i[3]?.url&&!i[20]&&et(i);return{c(){n&&n.c(),e=ot()},m(l,s){n&&n.m(l,s),re(l,e,s),t=!0},p(l,s){l[3]?.url&&!l[20]?n?(n.p(l,s),s[0]&1048584&&$(n,1)):(n=et(l),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(_e(),S(n,1,1,()=>{n=null}),ue())},i(l){t||($(n),t=!0)},o(l){S(n),t=!1},d(l){l&&le(e),n&&n.d(l)}}}function it(i){let e;const t=i[32].default,n=An(t,i,i[48],null);return{c(){n&&n.c()},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s[1]&131072)&&Jn(n,t,l,l[48],e?Hn(t,l[48],s,null):Fn(l[48]),null)},i(l){e||($(n,l),e=!0)},o(l){S(n,l),e=!1},d(l){n&&n.d(l)}}}function Yn(i){let e,t,n=i[3]===null&&it(i);return{c(){n&&n.c(),e=ot()},m(l,s){n&&n.m(l,s),re(l,e,s),t=!0},p(l,s){l[3]===null?n?(n.p(l,s),s[0]&8&&$(n,1)):(n=it(l),n.c(),$(n,1),n.m(e.parentNode,e)):n&&(_e(),S(n,1,1,()=>{n=null}),ue())},i(l){t||($(n),t=!0)},o(l){S(n),t=!1},d(l){l&&le(e),n&&n.d(l)}}}function Zn(i){let e,t,n,l,s;return t=new Mt({props:{src:i[3].url,alt:i[3].alt_text}}),{c(){e=Le("div"),Q(t.$$.fragment),$e(e,"class","image-frame svelte-1ti4ehe"),qe(e,"selectable",i[11])},m(r,a){re(r,e,a),Y(t,e,null),n=!0,l||(s=Pn(e,"click",i[28]),l=!0)},p(r,a){const o={};a[0]&8&&(o.src=r[3].url),a[0]&8&&(o.alt=r[3].alt_text),t.$set(o),(!n||a[0]&2048)&&qe(e,"selectable",r[11])},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){S(t.$$.fragment,r),n=!1},d(r){r&&le(e),X(t),l=!1,s()}}}function xn(i){let e,t,n,l;function s(o){i[38](o)}function r(o){i[39](o)}let a={root:i[12],value:i[3],mirror_webcam:i[10],stream_every:i[17],streaming:i[9],mode:"image",include_audio:!1,i18n:i[13],upload:i[15],webcam_constraints:i[19]};return i[4]!==void 0&&(a.modify_stream=i[4]),i[5]!==void 0&&(a.set_time_limit=i[5]),e=new Ln({props:a}),ie.push(()=>pe(e,"modify_stream",s)),ie.push(()=>pe(e,"set_time_limit",r)),e.$on("capture",i[40]),e.$on("stream",i[41]),e.$on("error",i[42]),e.$on("drag",i[43]),e.$on("upload",i[44]),e.$on("close_stream",i[45]),{c(){Q(e.$$.fragment)},m(o,u){Y(e,o,u),l=!0},p(o,u){const f={};u[0]&4096&&(f.root=o[12]),u[0]&8&&(f.value=o[3]),u[0]&1024&&(f.mirror_webcam=o[10]),u[0]&131072&&(f.stream_every=o[17]),u[0]&512&&(f.streaming=o[9]),u[0]&8192&&(f.i18n=o[13]),u[0]&32768&&(f.upload=o[15]),u[0]&524288&&(f.webcam_constraints=o[19]),!t&&u[0]&16&&(t=!0,f.modify_stream=o[4],be(()=>t=!1)),!n&&u[0]&32&&(n=!0,f.set_time_limit=o[5],be(()=>n=!1)),e.$set(f)},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){S(e.$$.fragment,o),l=!1},d(o){X(e,o)}}}function lt(i){let e,t,n;function l(r){i[46](r)}let s={sources:i[8],handle_clear:i[25],handle_select:i[29]};return i[1]!==void 0&&(s.active_source=i[1]),e=new yt({props:s}),ie.push(()=>pe(e,"active_source",l)),{c(){Q(e.$$.fragment)},m(r,a){Y(e,r,a),n=!0},p(r,a){const o={};a[0]&256&&(o.sources=r[8]),!t&&a[0]&2&&(t=!0,o.active_source=r[1],be(()=>t=!1)),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function ei(i){let e,t,n,l,s,r,a,o,u,f,_,w,I,N=i[8].length>1||i[8].includes("clipboard"),d;e=new gt({props:{show_label:i[7],Icon:bt,label:i[6]||"Image"}}),l=new It({props:{$$slots:{default:[Xn]},$$scope:{ctx:i}}});function h(m){i[35](m)}function b(m){i[36](m)}let k={hidden:i[3]!==null||i[1]==="webcam",filetype:i[1]==="clipboard"?"clipboard":"image/*",root:i[12],max_file_size:i[14],disable_click:!i[8].includes("upload")||i[3]!==null,upload:i[15],stream_handler:i[16],$$slots:{default:[Yn]},$$scope:{ctx:i}};i[0]!==void 0&&(k.uploading=i[0]),i[2]!==void 0&&(k.dragging=i[2]),a=new Et({props:k}),i[34](a),ie.push(()=>pe(a,"uploading",h)),ie.push(()=>pe(a,"dragging",b)),a.$on("load",i[24]),a.$on("error",i[37]);const U=[xn,Zn],z=[];function F(m,p){return m[1]==="webcam"&&(m[9]||!m[9]&&!m[3])?0:m[3]!==null&&!m[9]?1:-1}~(_=F(i))&&(w=z[_]=U[_](i));let v=N&&lt(i);return{c(){Q(e.$$.fragment),t=ce(),n=Le("div"),Q(l.$$.fragment),s=ce(),r=Le("div"),Q(a.$$.fragment),f=ce(),w&&w.c(),I=ce(),v&&v.c(),$e(r,"class","upload-container svelte-1ti4ehe"),qe(r,"reduced-height",i[8].length>1),xe(r,"width",i[3]?"auto":"100%"),$e(n,"data-testid","image"),$e(n,"class","image-container svelte-1ti4ehe")},m(m,p){Y(e,m,p),re(m,t,p),re(m,n,p),Y(l,n,null),ye(n,s),ye(n,r),Y(a,r,null),ye(r,f),~_&&z[_].m(r,null),ye(n,I),v&&v.m(n,null),i[47](n),d=!0},p(m,p){const L={};p[0]&128&&(L.show_label=m[7]),p[0]&64&&(L.label=m[6]||"Image"),e.$set(L);const j={};p[0]&5505032|p[1]&131072&&(j.$$scope={dirty:p,ctx:m}),l.$set(j);const W={};p[0]&10&&(W.hidden=m[3]!==null||m[1]==="webcam"),p[0]&2&&(W.filetype=m[1]==="clipboard"?"clipboard":"image/*"),p[0]&4096&&(W.root=m[12]),p[0]&16384&&(W.max_file_size=m[14]),p[0]&264&&(W.disable_click=!m[8].includes("upload")||m[3]!==null),p[0]&32768&&(W.upload=m[15]),p[0]&65536&&(W.stream_handler=m[16]),p[0]&8|p[1]&131072&&(W.$$scope={dirty:p,ctx:m}),!o&&p[0]&1&&(o=!0,W.uploading=m[0],be(()=>o=!1)),!u&&p[0]&4&&(u=!0,W.dragging=m[2],be(()=>u=!1)),a.$set(W);let H=_;_=F(m),_===H?~_&&z[_].p(m,p):(w&&(_e(),S(z[H],1,1,()=>{z[H]=null}),ue()),~_?(w=z[_],w?w.p(m,p):(w=z[_]=U[_](m),w.c()),$(w,1),w.m(r,null)):w=null),(!d||p[0]&256)&&qe(r,"reduced-height",m[8].length>1),p[0]&8&&xe(r,"width",m[3]?"auto":"100%"),p[0]&256&&(N=m[8].length>1||m[8].includes("clipboard")),N?v?(v.p(m,p),p[0]&256&&$(v,1)):(v=lt(m),v.c(),$(v,1),v.m(n,null)):v&&(_e(),S(v,1,1,()=>{v=null}),ue())},i(m){d||($(e.$$.fragment,m),$(l.$$.fragment,m),$(a.$$.fragment,m),$(w),$(v),d=!0)},o(m){S(e.$$.fragment,m),S(l.$$.fragment,m),S(a.$$.fragment,m),S(w),S(v),d=!1},d(m){m&&(le(t),le(n)),X(e,m),X(l),i[34](null),X(a),~_&&z[_].d(),v&&v.d(),i[47](null)}}}function ti(i,e,t){let n,{$$slots:l={},$$scope:s}=e,{value:r=null}=e,{label:a=void 0}=e,{show_label:o}=e,{sources:u=["upload","clipboard","webcam"]}=e,{streaming:f=!1}=e,{pending:_=!1}=e,{mirror_webcam:w}=e,{selectable:I=!1}=e,{root:N}=e,{i18n:d}=e,{max_file_size:h=null}=e,{upload:b}=e,{stream_handler:k}=e,{stream_every:U}=e,{modify_stream:z}=e,{set_time_limit:F}=e,{show_fullscreen_button:v=!0}=e,m,{uploading:p=!1}=e,{active_source:L=null}=e,{webcam_constraints:j=void 0}=e;function W({detail:c}){f||(t(3,r=c),V("upload"))}function H(){t(3,r=null),V("clear"),V("change",null)}async function G(c,oe){if(oe==="stream"){V("stream",{value:{url:c},is_value_data:!0});return}t(31,_=!0);const dt=await m.load_files([new File([c],`image/${f?"jpeg":"png"}`)]);(oe==="change"||oe==="upload")&&(t(3,r=dt?.[0]||null),await Qn(),V("change")),t(31,_=!1)}const V=Kn();let{dragging:te=!1}=e;function fe(c){let oe=$t(c);oe&&V("select",{index:oe,value:null})}async function Ce(c){switch(c){case"clipboard":m.paste_clipboard();break}}let ne=!1,se;const De=async()=>{await se.requestFullscreen()},Ee=c=>{t(3,r=null),V("clear"),c.stopPropagation()};function Me(c){ie[c?"unshift":"push"](()=>{m=c,t(21,m)})}function ze(c){p=c,t(0,p)}function g(c){te=c,t(2,te)}function B(c){Ie.call(this,i,c)}function J(c){z=c,t(4,z)}function me(c){F=c,t(5,F)}const de=c=>G(c.detail,"change"),We=c=>G(c.detail,"stream");function at(c){Ie.call(this,i,c)}function ct(c){Ie.call(this,i,c)}const ut=c=>G(c.detail,"upload");function _t(c){Ie.call(this,i,c)}function ft(c){L=c,t(1,L),t(8,u)}function mt(c){ie[c?"unshift":"push"](()=>{se=c,t(23,se)})}return i.$$set=c=>{"value"in c&&t(3,r=c.value),"label"in c&&t(6,a=c.label),"show_label"in c&&t(7,o=c.show_label),"sources"in c&&t(8,u=c.sources),"streaming"in c&&t(9,f=c.streaming),"pending"in c&&t(31,_=c.pending),"mirror_webcam"in c&&t(10,w=c.mirror_webcam),"selectable"in c&&t(11,I=c.selectable),"root"in c&&t(12,N=c.root),"i18n"in c&&t(13,d=c.i18n),"max_file_size"in c&&t(14,h=c.max_file_size),"upload"in c&&t(15,b=c.upload),"stream_handler"in c&&t(16,k=c.stream_handler),"stream_every"in c&&t(17,U=c.stream_every),"modify_stream"in c&&t(4,z=c.modify_stream),"set_time_limit"in c&&t(5,F=c.set_time_limit),"show_fullscreen_button"in c&&t(18,v=c.show_fullscreen_button),"uploading"in c&&t(0,p=c.uploading),"active_source"in c&&t(1,L=c.active_source),"webcam_constraints"in c&&t(19,j=c.webcam_constraints),"dragging"in c&&t(2,te=c.dragging),"$$scope"in c&&t(48,s=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&258&&!L&&u&&t(1,L=u[0]),i.$$.dirty[0]&514&&t(20,n=f&&L==="webcam"),i.$$.dirty[0]&1048577&&p&&!n&&t(3,r=null),i.$$.dirty[0]&4&&V("drag",te)},[p,L,te,r,z,F,a,o,u,f,w,I,N,d,h,b,k,U,v,j,n,m,ne,se,W,H,G,V,fe,Ce,De,_,l,Ee,Me,ze,g,B,J,me,de,We,at,ct,ut,_t,ft,mt,s]}class ni extends Vn{constructor(e){super(),On(this,e,ti,ei,Gn,{value:3,label:6,show_label:7,sources:8,streaming:9,pending:31,mirror_webcam:10,selectable:11,root:12,i18n:13,max_file_size:14,upload:15,stream_handler:16,stream_every:17,modify_stream:4,set_time_limit:5,show_fullscreen_button:18,uploading:0,active_source:1,webcam_constraints:19,dragging:2},null,[-1,-1])}get value(){return this.$$.ctx[3]}set value(e){this.$$set({value:e}),q()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),q()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),q()}get sources(){return this.$$.ctx[8]}set sources(e){this.$$set({sources:e}),q()}get streaming(){return this.$$.ctx[9]}set streaming(e){this.$$set({streaming:e}),q()}get pending(){return this.$$.ctx[31]}set pending(e){this.$$set({pending:e}),q()}get mirror_webcam(){return this.$$.ctx[10]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),q()}get selectable(){return this.$$.ctx[11]}set selectable(e){this.$$set({selectable:e}),q()}get root(){return this.$$.ctx[12]}set root(e){this.$$set({root:e}),q()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),q()}get max_file_size(){return this.$$.ctx[14]}set max_file_size(e){this.$$set({max_file_size:e}),q()}get upload(){return this.$$.ctx[15]}set upload(e){this.$$set({upload:e}),q()}get stream_handler(){return this.$$.ctx[16]}set stream_handler(e){this.$$set({stream_handler:e}),q()}get stream_every(){return this.$$.ctx[17]}set stream_every(e){this.$$set({stream_every:e}),q()}get modify_stream(){return this.$$.ctx[4]}set modify_stream(e){this.$$set({modify_stream:e}),q()}get set_time_limit(){return this.$$.ctx[5]}set set_time_limit(e){this.$$set({set_time_limit:e}),q()}get show_fullscreen_button(){return this.$$.ctx[18]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),q()}get uploading(){return this.$$.ctx[0]}set uploading(e){this.$$set({uploading:e}),q()}get active_source(){return this.$$.ctx[1]}set active_source(e){this.$$set({active_source:e}),q()}get webcam_constraints(){return this.$$.ctx[19]}set webcam_constraints(e){this.$$set({webcam_constraints:e}),q()}get dragging(){return this.$$.ctx[2]}set dragging(e){this.$$set({dragging:e}),q()}}const ki=ni;export{ki as I,Ln as W};
//# sourceMappingURL=ImageUploader-CXR5HgH0.js.map
